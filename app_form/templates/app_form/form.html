{% extends "base.html" %}

{% block title %}Form for a new entry in the Research Constructicon{% endblock %}

{% block content %}

    <div class="container">
      <form action="{{ url_for('app_form.form_submit') }}" method="POST">
        <h1>Metadata</h1>
        <div>
          <label for="uri">Select your name:</label>
          <select id="uri" name="uri" onchange="generateProjectName(this.value)" required>
            {% for uri, name in uris %}
              <option value="{{ uri }}">{{ name }}</option>
            {% endfor %}
          </select>
        </div>

        <h1>General</h1>
        <h3>Title</h3>
        <div>
          <label for="construction">
            Give a name to the construction:
            <span title="The name of the language should not be part of the title" style="cursor: help;">ℹ️</span>
          </label>
          <input type="text" id="construction" name="construction" required>
        </div>
        <h3>Research Question</h3>
        <div>
          <label for="project-select">Select a research question:</label>
          <select id="project-select" name="projectId" required>
            <option value="">-- Select a research question --</option>
          </select>
        </div>
        <div>
          <label for="Rquestion">You can specify a more specific research question within this general one:</label>
          <input type="text" id="Rquestion" name="Rquestion">
          <label for="Rquestion">(optional field)</label>
        </div>
        <h3>Findings</h3>
        <div>
          <label for="findings">What are the findings?</label>
          <textarea id="findings" name="findings" rows="3" style="resize: none;"></textarea>
          <label for="findings">(recommended field)</label>
        </div>
        <h3>Language</h3>
        <div>
          <label for="language">Language (also: time frame, dialect area, written/spoken modality text genre)</label>
          <input type="text" id="language" name="language" size="50" required>
        </div>
        <h3>Construction Status</h3>
        <div>
          <label for="construction_status">Is this a construction?</label>
          <select id="construction_status" name="construction_status">
            <option value="none" selected></option> <!-- Default value for no selection -->
            <option value="yes">Yes</option>
            <option value="not_known">Not known</option>
            <option value="no">No</option>
          </select>
          <label for="construction_status">(recommended field)</label>
        </div>

        <h1>Meaning of the construction</h1>
        <h3>Meaning</h3>
        <div>
          <label for="meaning">The meaning/function of the whole construction:</label>
          <textarea id="meaning" name="meaning" rows="3" style="resize: none;"></textarea>
          <label for="meaning">(recommended field)</label>
        </div>
        <h3>Image-schema recruited</h3>
        <div>For the moment, there is no image-schema in the database.</div>
        <div>
          <label for="new_image_schema">If you wish to add an image-schema in the database, enter its name and Elodie will reach out to implement it</label>
          <input id="new_image_schema" name="new_image_schema" type="text">
          <label for="new_image_schema">(optional field)</label>
        </div>


        <h1>Form-meaning pairing of the elements</h1>
        <h3>Number of elements</h3>
        <label for="element_nb">Number of elements (at least 1):</label>
        <input type="number" id="element_nb" name="element_nb" min="1" oninput="generateFields()" required>

        <div id="ElementsContainer"></div>


        <h1>Cotext</h1>
        <div> We define cotext as information that applies to one or more elements (without being a description of the element itself). </div>

        <h3>Information Structure</h3>
        <div id="infoStructureContainer" class="info-structure-grid"></div>
        <label for="infoStructureContainer">(optional field)</label>

        <h3>Intonation</h3>
        <div>
          <label for="intonation">We have not yet developed an implementation of intonation in the constructicon. If intonation (or prosody) applies to your construction, please indicate below what kind of information you would like to provide, particularly in terms of terminology.</label>
          <textarea id="intonation" name="intonation" rows="3" style="resize: none;"></textarea>
          <label for="intonation">(optional field)</label>
        </div>

        <h3>Gesture</h3>
        <div>
          <label for="gesture">We have not yet developed an implementation of gesture in the constructicon. If gesture applies to your construction, please indicate below what kind of information you would like to provide, particularly in terms of terminology.</label>
          <textarea id="gesture" name="gesture" rows="3" style="resize: none;"></textarea>
          <label for="gesture">(optional field)</label>
        </div>

        <h1>Examples</h1>
        <div id="ExamplesContainer"></div>
        <button type="button" onclick="addExample()">Add Example</button>


        <h1>Links</h1>
        <h3>Inherits from</h3>
        <div>
          <input type="text" id="inheritsFrom" name="inheritsFrom" placeholder="Type construction name">
          <button type="button" id="add_inherits_from">Add</button>
        </div>
        <div id="selected_inherits_from"></div>
        <input type="hidden" id="selected_inherits_from_list" name="selected_inherits_from">
        <div>(optional field)</div>

        <h3>Inherited by</h3>
        <div>
          <input type="text" id="inheritedBy" name="inheritedBy" placeholder="Type construction name">
          <button type="button" id="add_inherited_by">Add</button>
        </div>
        <div id="selected_inherited_by"></div>
        <input type="hidden" id="selected_inherited_by_list" name="selected_inherited_by">
        <div>(optional field)</div>

        <h3>Metaphorical extension</h3>
        <div>
          <input type="text" id="metaphoricalExtension" name="metaphoricalExtension" placeholder="Type construction name">
          <button type="button" id="add_metaphorical_extension">Add</button>
        </div>
        <div id="selected_metaphorical_extension"></div>
        <input type="hidden" id="selected_metaphorical_extension_list" name="selected_metaphorical_extension">
        <div>(optional field)</div>

        <h3>Similarity links</h3>
        <div id="SimilarityContainer"></div>
        <button type="button" onclick="addSimilarityLink()">Add Similarity Link</button>
        <div>(optional field)</div>


        <h1>Research data</h1>
        <div>
          <label for="researchdata">Describe briefly the research data that you wish to link to: how many files? which format? are there specific requirements?</label>
          <textarea id="researchdata" name="researchdata" rows="7" style="resize: none;"></textarea>
          <label for="researchdata">(recommended field)</label>
        </div>

        <h1>Sources</h1>
      <h3>Reference</h3>
      <div>
        <label for="reference">This is what the content of the entry is based on.</label>
        <label for="reference">Go in your reference management software (e.g. Zotero) and export the content of the entry in Dublin Core (e.g. for Zotero: export as "Unqualified Dublin Core RDF"). Copy-and-paste the code provided below:</label>
        <textarea id="reference" name="reference" rows="10" cols="50" placeholder="Paste RDF code"></textarea>
        <label for="reference">(recommended field)</label>
      </div>
      <!-- Hidden field to store the URI of the UserItem -->
      <input type="hidden" id="ReferenceUserItemURI" name="ReferenceUserItemURI">

      <h3>Literature</h3>
      <div id="literature-container">
        <div class="literature-entry">
          List here the literature dedicated to this construction.<br>
          Go in your reference management software (e.g. Zotero) and export the content of the entry in Dublin Core (e.g. for Zotero: export as "Unqualified Dublin Core RDF").
          <label for="literature">Copy-and-paste the code provided below:</label>
          <textarea name="literature[]" rows="5" cols="50" placeholder="Paste RDF code"></textarea>
        </div>
      </div>
      <button type="button" id="add-literature-btn">Add another Literature entry</button>
        <div>(optional field)</div>

      <h3>Similar construction in other Constructicons</h3>
      <div id="url-container">
        <div class="url-entry">
          <label for="url">Please provide an URL:</label>
          <input type="url" name="url[]" placeholder="Enter URL">
        </div>
      </div>
<button type="button" id="add-url-btn">Add another URL</button>
        <div>(optional field)</div>


        <h1>Well done! (don't forget to submit)</h1>
        <button type="submit" onclick="submitForm()">Submit Form</button>
      </form>
    </div>

    <script>
      const projects = {{ projects|tojson|safe }};

      function generateProjectName(uri) {
          const projectSelect = document.getElementById('project-select');
          projectSelect.innerHTML = '<option value="">-- Select a research question --</option>'; // Clear existing options

          const projectIdPrefix = `Project_${uri}`;
          let projectFound = false;

          projects.forEach(([projectId, projectName]) => {
              if (projectId.startsWith(projectIdPrefix)) {
                  const option = document.createElement('option');
                  option.value = projectId;
                  option.textContent = projectName;
                  projectSelect.appendChild(option);
                  projectFound = true;
              }
          });

          if (!projectFound) {
              projectSelect.innerHTML += '<option value="">No projects found</option>';
          }
      }

      function generateFields() {
        const elementNb = document.getElementById('element_nb').value;
        const container = document.getElementById('ElementsContainer');
        const infoContainer = document.getElementById('infoStructureContainer');
        container.innerHTML = ''; // Clear previous fields
        infoContainer.innerHTML = ''; // Clear previous information structure fields
        const constructionName = document.getElementById('construction').value.replace(/\s+/g, ''); // Get and clean construction name

      for (let i = 0; i < elementNb; i++) {

          // Create a title for each element
          const elementTitle = document.createElement('h3');
          elementTitle.textContent = `Element ${i + 1}`;
          container.appendChild(elementTitle);

          // Create the dropdown for optionality
          const optionalityLabel = document.createElement('label');
          optionalityLabel.textContent = 'Optionality of the element:';
          const optionalitySelect = document.createElement('select');
          optionalitySelect.name = `optionality_${i + 1}`;
          optionalitySelect.required = true;

          const nonOptionalOption = document.createElement('option');
          nonOptionalOption.value = 'non-optional';
          nonOptionalOption.textContent = 'Non-optional element';
          nonOptionalOption.selected = true;

          const optionalOption = document.createElement('option');
          optionalOption.value = 'optional';
          optionalOption.textContent = 'Optional element';

          optionalitySelect.appendChild(nonOptionalOption);
          optionalitySelect.appendChild(optionalOption);

          container.appendChild(optionalityLabel);
          container.appendChild(optionalitySelect);
          container.appendChild(document.createElement('br'));

          // Create fields for word order
          const orderLabel = document.createElement('label');
          orderLabel.textContent = `Word order specifications (recommended):`;
          // Create an info icon
          const orderInfoIcon = document.createElement('span');
          orderInfoIcon.className = 'info-icon';
          orderInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const orderTooltipText = document.createElement('span');
          orderTooltipText.className = 'tooltiptext';
          orderTooltipText.innerHTML = `
            By default, the order is considered to be irrelevant. Therefore, specifications should be spelled out.<br>
            For example: <br>
            Element 1 immediately before element 2.`;
          // Create a container for the label and the info icon
          const orderLabelContainer = document.createElement('div');
          orderLabelContainer.className = 'label-container';
          orderLabelContainer.appendChild(orderLabel);
          orderLabelContainer.appendChild(orderInfoIcon);
          const orderInput = document.createElement('input');
          orderInput.type = 'text';
          orderInput.name = `WordOrder_${i + 1}`;
          // Create a container for the input and the tooltip
          const orderTooltipContainer = document.createElement('div');
          orderTooltipContainer.className = 'tooltip-container';
          orderTooltipContainer.appendChild(orderInput);
          orderTooltipContainer.appendChild(orderTooltipText);
          // Add tooltip functionality to the info icon
          orderInfoIcon.appendChild(orderTooltipText);
          container.appendChild(orderLabelContainer);
          container.appendChild(orderTooltipContainer);
          container.appendChild(document.createElement('br'));

          // Create fields for surface form
          const surfaceLabel = document.createElement('label');
          surfaceLabel.textContent = `Surface form (optional):`;
          // Create an info icon
          const surfaceInfoIcon = document.createElement('span');
          surfaceInfoIcon.className = 'info-icon';
          surfaceInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const surfaceTooltipText = document.createElement('span');
          surfaceTooltipText.className = 'tooltiptext';
          surfaceTooltipText.innerHTML = `
            Use this when the element is a specific lexical item in a specific form. For lemmata, see another field below.<br>
            For example:<br>
            devil<br>
            what`;
          // Create a container for the label and the info icon
          const surfaceLabelContainer = document.createElement('div');
          surfaceLabelContainer.className = 'label-container';
          surfaceLabelContainer.appendChild(surfaceLabel);
          surfaceLabelContainer.appendChild(surfaceInfoIcon);
          const surfaceInput = document.createElement('input');
          surfaceInput.type = 'text';
          surfaceInput.name = `surface_form_${i + 1}`;
          // Create a container for the input and the tooltip
          const surfaceTooltipContainer = document.createElement('div');
          surfaceTooltipContainer.className = 'tooltip-container';
          surfaceTooltipContainer.appendChild(surfaceInput);
          surfaceTooltipContainer.appendChild(surfaceTooltipText);
          // Add tooltip functionality to the info icon
          surfaceInfoIcon.appendChild(surfaceTooltipText);
          container.appendChild(surfaceLabelContainer);
          container.appendChild(surfaceTooltipContainer);
          container.appendChild(document.createElement('br'));

          // Create fields for root
          const rootLabel = document.createElement('label');
          rootLabel.textContent = `Root (optional):`;
          // Create an info icon
          const rootInfoIcon = document.createElement('span');
          rootInfoIcon.className = 'info-icon';
          rootInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const rootTooltipText = document.createElement('span');
          rootTooltipText.className = 'tooltiptext';
          rootTooltipText.innerHTML = `
            NB: You probably don't need this field if you entered a surface form above.<br>
            For example: <br>
            Latin: In "amare" (to love), "am-" is the root.`;
          // Create a container for the label and the info icon
          const rootLabelContainer = document.createElement('div');
          rootLabelContainer.className = 'label-container';
          rootLabelContainer.appendChild(rootLabel);
          rootLabelContainer.appendChild(rootInfoIcon);
          const rootInput = document.createElement('input');
          rootInput.type = 'text';
          rootInput.name = `root_${i + 1}`;
          // Create a container for the input and the tooltip
          const rootTooltipContainer = document.createElement('div');
          rootTooltipContainer.className = 'tooltip-container';
          rootTooltipContainer.appendChild(rootInput);
          rootTooltipContainer.appendChild(rootTooltipText);
          // Add tooltip functionality to the info icon
          rootInfoIcon.appendChild(rootTooltipText);
          container.appendChild(rootLabelContainer);
          container.appendChild(rootTooltipContainer);
          container.appendChild(document.createElement('br'));

          // Create fields for stem
          const stemLabel = document.createElement('label');
          stemLabel.textContent = `Stem / Lemma (optional):`;
          // Create an info icon
          const stemInfoIcon = document.createElement('span');
          stemInfoIcon.className = 'info-icon';
          stemInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const stemTooltipText = document.createElement('span');
          stemTooltipText.className = 'tooltiptext';
          stemTooltipText.innerHTML = `
            NB: You probably don't need this field if you entered a surface form above.<br>
            For example: <br>
            English: talk (lemma) <br>
            Spanish: habl- (stem)`;
          // Create a container for the label and the info icon
          const stemLabelContainer = document.createElement('div');
          stemLabelContainer.className = 'label-container';
          stemLabelContainer.appendChild(stemLabel);
          stemLabelContainer.appendChild(stemInfoIcon);
          const stemInput = document.createElement('input');
          stemInput.type = 'text';
          stemInput.name = `stem_${i + 1}`;
          // Create a container for the input and the tooltip
          const stemTooltipContainer = document.createElement('div');
          stemTooltipContainer.className = 'tooltip-container';
          stemTooltipContainer.appendChild(stemInput);
          stemTooltipContainer.appendChild(stemTooltipText);
          // Add tooltip functionality to the info icon
          stemInfoIcon.appendChild(stemTooltipText);
          container.appendChild(stemLabelContainer);
          container.appendChild(stemTooltipContainer);
          container.appendChild(document.createElement('br'));

          // Create fields for transliteration
          const transliterationLabel = document.createElement('label');
          transliterationLabel.textContent = `Transliteration (optional):`;
          const transliterationInput = document.createElement('input');
          transliterationInput.type = 'text';
          transliterationInput.name = `transliteration_${i + 1}`;
          container.appendChild(transliterationLabel);
          container.appendChild(transliterationInput);
          container.appendChild(document.createElement('br'));

          // Create fields for translation
          const translationLabel = document.createElement('label');
          translationLabel.textContent = `Translation (recommended):`;
          const translationInput = document.createElement('input');
          translationInput.type = 'text';
          translationInput.name = `translation_${i + 1}`;
          container.appendChild(translationLabel);
          container.appendChild(translationInput);
          container.appendChild(document.createElement('br'));

          // Create fields for morpho-syntactic form
          const morphoLabel = document.createElement('label');
          morphoLabel.textContent = `(Morpho-)syntactic form (optional):`;
          // Create an info icon
          const morphInfoIcon = document.createElement('span');
          morphInfoIcon.className = 'info-icon';
          morphInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const morphoTooltipText = document.createElement('span');
          morphoTooltipText.className = 'tooltiptext';
          morphoTooltipText.innerHTML = `
            Possible morpho-syntactic forms (non-exhaustive list):
            <ul>
              <li> Morpheme
              <ul>
              <li> Prefix
              <li> Suffix
              <li> Root
              <li> Clitic
              </ul>
              <li> Part-of-speech
              <ul>
                <li> Noun
                <li> Verb
                <li> Adjective
                <li> Adverb
                <li> Preposition
                <li> Particle
              </ul>
              <li> Phrase
              <ul>
                <li>NP (Noun Phrase)</li>
                <li>VP (Verb Phrase)</li>
                <li>AdjP (Adjective Phrase)</li>
                <li>PP (Prepositional Phrase)</li>
                <li>AdvP (Adverbial Phrase)</li>
              </ul>
              <li> Clause type
              <ul>
                <li> main clause
                <li> subordinate clause
              </ul>
              <li> Discourse segments
            </ul>
            This field can be used to disambiguate between lexical items provided above (e.g. "talk" as Verb rather than Noun).`;
          // Create a container for the label and the info icon
          const morphoLabelContainer = document.createElement('div');
          morphoLabelContainer.className = 'label-container';
          morphoLabelContainer.appendChild(morphoLabel);
          morphoLabelContainer.appendChild(morphInfoIcon);
          const morphoInput = document.createElement('input');
          morphoInput.type = 'text';
          morphoInput.name = `morphosyntactic_form_${i + 1}`;
          // Create a container for the input and the tooltip
          const morphoTooltipContainer = document.createElement('div');
          morphoTooltipContainer.className = 'tooltip-container';
          morphoTooltipContainer.appendChild(morphoInput);
          morphoTooltipContainer.appendChild(morphoTooltipText);
          // Add tooltip functionality to the info icon
          morphInfoIcon.appendChild(morphoTooltipText);
          container.appendChild(morphoLabelContainer);
          container.appendChild(morphoTooltipContainer);
          container.appendChild(document.createElement('br'));

          // Create fields for syntactic function
          const syntacticFunctionLabel = document.createElement('label');
          syntacticFunctionLabel.textContent = `Syntactic function (optional):`;
          const syntacticFunctionInput = document.createElement('input');
          syntacticFunctionInput.type = 'text';
          syntacticFunctionInput.name = `syntactic_function_${i + 1}`;
          container.appendChild(syntacticFunctionLabel);
          container.appendChild(syntacticFunctionInput);
          container.appendChild(document.createElement('br'));

          // Create label for semantic contribution
          const semanticRoles = {{ semanticroles|tojson }};  // Convert Python list to JSON
          // Create fields for semantic contribution
          const semanticContributionLabel = document.createElement('label');
          semanticContributionLabel.textContent = `Semantic contribution of the element (recommended):`;
          // Create dropdown (select element) for semantic contribution
          const semanticContributionSelect = document.createElement('select');
          semanticContributionSelect.name = `semantic_contribution_${i + 1}`;
          // Populate the dropdown with options from the 'semanticRoles' array
          semanticRoles.forEach(role => {
            const option = document.createElement('option');
            option.value = role;
            option.textContent = role;
            semanticContributionSelect.appendChild(option);
          });
          // Add "Other" option to the dropdown
          const semanticContributionOtherOption = document.createElement('option');
          semanticContributionOtherOption.value = 'Other';
          semanticContributionOtherOption.textContent = 'Other';
          semanticContributionSelect.appendChild(semanticContributionOtherOption);
          // Append the label and dropdown to the container
          container.appendChild(semanticContributionLabel);
          container.appendChild(semanticContributionSelect);
          container.appendChild(document.createElement('br'));
          // Create an input field for "Other" option (initially hidden)
          const semanticContributionOtherInput = document.createElement('input');
          semanticContributionOtherInput.type = 'text';
          semanticContributionOtherInput.name = `add_semantic_contribution_${i + 1}`;
          semanticContributionOtherInput.placeholder = 'Please specify';  // Placeholder text inside the input field
          semanticContributionOtherInput.style.display = 'none';  // Hidden by default
          // Append the "Other" input field to the container
          container.appendChild(semanticContributionOtherInput);
          // Event listener for showing/hiding the "Other" input field based on selection
          semanticContributionSelect.addEventListener('change', function() {
            if (semanticContributionSelect.value === 'Other') {
              semanticContributionOtherInput.style.display = 'inline';  // Show the input field
            } else {
              semanticContributionOtherInput.style.display = 'none';  // Hide the input field
            }
          });

          // Create fields for colloprofile
          const colloprofileLabel = document.createElement('label');
          colloprofileLabel.textContent = `Colloprofile (Provisional: enter different lexical items separated by semicolons, and indications about frequency in parentheses) (optional):`;
          const colloprofileInput = document.createElement('input');
          colloprofileInput.type = 'text';
          colloprofileInput.name = `colloprofile_${i + 1}`;
          container.appendChild(colloprofileLabel);
          container.appendChild(colloprofileInput);
          container.appendChild(document.createElement('br'));

          // Create fields for animacy (dropdown + optional free-text input)
          const animacyLabel = document.createElement('label');
          animacyLabel.textContent = `Animacy (optional):`;
          container.appendChild(animacyLabel);
          const animacySelect = document.createElement('select');
          animacySelect.name = `animacy_${i + 1}`;
          animacySelect.onchange = function() { toggleAnimacyInput(animacySelect, i + 1); };  // Change handler for "other" selection
          // First option: empty
          const animacyEmptyOption = document.createElement('option');
          animacyEmptyOption.value = '';
          animacyEmptyOption.textContent = '';
          // Second option: animate
          const animateOption = document.createElement('option');
          animateOption.value = 'animate';
          animateOption.textContent = 'Animate';
          // Third option: inanimate
          const inanimateOption = document.createElement('option');
          inanimateOption.value = 'inanimate';
          inanimateOption.textContent = 'Inanimate';
          // Option other
          const animacyOtherOption = document.createElement('option');
          animacyOtherOption.value = 'other';
          animacyOtherOption.textContent = 'Other';
          // Select option
          animacySelect.appendChild(animacyEmptyOption);
          animacySelect.appendChild(animateOption);
          animacySelect.appendChild(inanimateOption);
          animacySelect.appendChild(animacyOtherOption);
          container.appendChild(animacySelect);
          // Hidden input for "other" animacy (free-text input field)
          const otherAnimacyInput = document.createElement('input');
          otherAnimacyInput.type = 'text';
          otherAnimacyInput.name = `other_animacy_${i + 1}`;
          otherAnimacyInput.placeholder = 'Please specify';
          otherAnimacyInput.style.display = 'none'; // Hidden by default
          container.appendChild(otherAnimacyInput);
          container.appendChild(document.createElement('br'));
          // Function to toggle free-text input visibility for "other" animacy selection
          function toggleAnimacyInput(selectElement, elementIndex) {
            const otherAnimacyInput = document.getElementsByName(`other_animacy_${elementIndex}`)[0];
            if (selectElement.value === 'other') {
              otherAnimacyInput.style.display = 'block'; // Show input field when "other" is selected
              } else {
              otherAnimacyInput.style.display = 'none'; // Hide input field for other selections
              }
            }

          // Create fields for gender (dropdown + optional free-text input)
          const genderLabel = document.createElement('label');
          genderLabel.textContent = `Gender (optional):`;
          container.appendChild(genderLabel);
          const genderSelect = document.createElement('select');
          genderSelect.name = `gender_${i + 1}`;
          genderSelect.onchange = function() { toggleGenderInput(genderSelect, i + 1); };  // Change handler for "other" selection
          // First option: empty
          const genderEmptyOption = document.createElement('option');
          genderEmptyOption.value = '';
          genderEmptyOption.textContent = '';
          // Second option: feminine
          const feminineOption = document.createElement('option');
          feminineOption.value = 'feminine';
          feminineOption.textContent = 'Feminine';
          // Third option: neuter
          const neuterOption = document.createElement('option');
          neuterOption.value = 'neuter';
          neuterOption.textContent = 'Neuter';
          // Fourth option: masculine
          const masculineOption = document.createElement('option');
          masculineOption.value = 'masculine';
          masculineOption.textContent = 'Masculine';
          // Fifth option: common
          const commonOption = document.createElement('option');
          commonOption.value = 'common';
          commonOption.textContent = 'Common';
          // Sixth option: vegetable
          const vegetableOption = document.createElement('option');
          vegetableOption.value = 'vegetable';
          vegetableOption.textContent = 'Vegetable';
          // Option other
          const genderOtherOption = document.createElement('option');
          genderOtherOption.value = 'other';
          genderOtherOption.textContent = 'Other';
          // Select option
          genderSelect.appendChild(genderEmptyOption);
          genderSelect.appendChild(feminineOption);
          genderSelect.appendChild(neuterOption);
          genderSelect.appendChild(masculineOption);
          genderSelect.appendChild(commonOption);
          genderSelect.appendChild(vegetableOption);
          genderSelect.appendChild(genderOtherOption);
          container.appendChild(genderSelect);
          // Hidden input for "other" gender (free-text input field)
          const otherGenderInput = document.createElement('input');
          otherGenderInput.type = 'text';
          otherGenderInput.name = `other_gender_${i + 1}`;
          otherGenderInput.placeholder = 'Please specify';
          otherGenderInput.style.display = 'none'; // Hidden by default
          container.appendChild(otherGenderInput);
          container.appendChild(document.createElement('br'));
          // Function to toggle free-text input visibility for "other" gender selection
          function toggleGenderInput(selectElement, elementIndex) {
            const otherGenderInput = document.getElementsByName(`other_gender_${elementIndex}`)[0];
            if (selectElement.value === 'other') {
              otherGenderInput.style.display = 'block'; // Show input field when "other" is selected
              } else {
              otherGenderInput.style.display = 'none'; // Hide input field for other selections
              }
            }

          // Create label for number
          const numberFeatures = {{ numberfeatures|tojson }};  // Convert Python list to JSON
          // Create fields for number
          const numberFeaturesLabel = document.createElement('label');
          numberFeaturesLabel.textContent = `Number of the element (optional):`;
          // Create dropdown (select element) for number
          const numberFeaturesSelect = document.createElement('select');
          numberFeaturesSelect.name = `number_${i + 1}`;
          // Populate the dropdown with options from the 'numberFeatures' array
          numberFeatures.forEach(role => {
            const option = document.createElement('option');
            option.value = role;
            option.textContent = role;
            numberFeaturesSelect.appendChild(option);
            });
          // Add "Other" option to the dropdown
          const numberFeaturesOtherOption = document.createElement('option');
          numberFeaturesOtherOption.value = 'Other';
          numberFeaturesOtherOption.textContent = 'Other';
          numberFeaturesSelect.appendChild(numberFeaturesOtherOption);
          // Append the label and dropdown to the container
          container.appendChild(numberFeaturesLabel);
          container.appendChild(numberFeaturesSelect);
          container.appendChild(document.createElement('br'));
          // Create an input field for "Other" option (initially hidden)
          const numberFeaturesOtherInput = document.createElement('input');
          numberFeaturesOtherInput.type = 'text';
          numberFeaturesOtherInput.name = `add_number_${i + 1}`;
          numberFeaturesOtherInput.placeholder = 'Please specify';  // Placeholder text inside the input field
          numberFeaturesOtherInput.style.display = 'none';  // Hidden by default
          // Append the "Other" input field to the container
          container.appendChild(numberFeaturesOtherInput);
          // Event listener for showing/hiding the "Other" input field based on selection
          numberFeaturesSelect.addEventListener('change', function() {
            if (numberFeaturesSelect.value === 'Other') {
              numberFeaturesOtherInput.style.display = 'inline';  // Show the input field
            } else {
              numberFeaturesOtherInput.style.display = 'none';  // Hide the input field
            }
          });

          // Create label for case
          const caseFeatures = {{ casefeatures|tojson }};  // Convert Python list to JSON
          // Create fields for case
          const caseFeaturesLabel = document.createElement('label');
          caseFeaturesLabel.textContent = `Case of the element (optional):`;
          // Create dropdown (select element) for case
          const caseFeaturesSelect = document.createElement('select');
          caseFeaturesSelect.name = `case_${i + 1}`;
          // Populate the dropdown with options from the 'caseFeatures' array
          caseFeatures.forEach(role => {
            const option = document.createElement('option');
            option.value = role;
            option.textContent = role;
            caseFeaturesSelect.appendChild(option);
            });
          // Add "Other" option to the dropdown
          const caseFeaturesOtherOption = document.createElement('option');
          caseFeaturesOtherOption.value = 'Other';
          caseFeaturesOtherOption.textContent = 'Other';
          caseFeaturesSelect.appendChild(caseFeaturesOtherOption);
          // Append the label and dropdown to the container
          container.appendChild(caseFeaturesLabel);
          container.appendChild(caseFeaturesSelect);
          container.appendChild(document.createElement('br'));
          // Create an input field for "Other" option (initially hidden)
          const caseFeaturesOtherInput = document.createElement('input');
          caseFeaturesOtherInput.type = 'text';
          caseFeaturesOtherInput.name = `add_case_${i + 1}`;
          caseFeaturesOtherInput.placeholder = 'Please specify';  // Placeholder text inside the input field
          caseFeaturesOtherInput.style.display = 'none';  // Hidden by default
          // Append the "Other" input field to the container
          container.appendChild(caseFeaturesOtherInput);
          // Event listener for showing/hiding the "Other" input field based on selection
          caseFeaturesSelect.addEventListener('change', function() {
            if (caseFeaturesSelect.value === 'Other') {
              caseFeaturesOtherInput.style.display = 'inline';  // Show the input field
            } else {
              caseFeaturesOtherInput.style.display = 'none';  // Hide the input field
            }
          });

          // Create fields for person (dropdown + optional free-text input)
          const personLabel = document.createElement('label');
          personLabel.textContent = `Person (optional):`;
          container.appendChild(personLabel);
          const personSelect = document.createElement('select');
          personSelect.name = `person_${i + 1}`;
          personSelect.onchange = function() { togglePersonInput(personSelect, i + 1); };  // Change handler for "other" selection
          // First option: empty
          const personEmptyOption = document.createElement('option');
          personEmptyOption.value = '';
          personEmptyOption.textContent = '';
          // Second option: First
          const firstOption = document.createElement('option');
          firstOption.value = 'first';
          firstOption.textContent = 'First';
          // Third option: Second
          const secondOption = document.createElement('option');
          secondOption.value = 'second';
          secondOption.textContent = 'Second';
          // Fourth option: Third
          const thirdOption = document.createElement('option');
          thirdOption.value = 'third';
          thirdOption.textContent = 'Third';
          // Option other
          const personOtherOption = document.createElement('option');
          personOtherOption.value = 'other';
          personOtherOption.textContent = 'Other';
          // Select option
          personSelect.appendChild(personEmptyOption);
          personSelect.appendChild(firstOption);
          personSelect.appendChild(secondOption);
          personSelect.appendChild(thirdOption);
          personSelect.appendChild(personOtherOption);
          container.appendChild(personSelect);
          // Hidden input for "other" person (free-text input field)
          const otherPersonInput = document.createElement('input');
          otherPersonInput.type = 'text';
          otherPersonInput.name = `other_person_${i + 1}`;
          otherPersonInput.placeholder = 'Please specify';
          otherPersonInput.style.display = 'none'; // Hidden by default
          container.appendChild(otherPersonInput);
          container.appendChild(document.createElement('br'));
          // Function to toggle free-text input visibility for "other" person selection
          function togglePersonInput(selectElement, elementIndex) {
            const otherPersonInput = document.getElementsByName(`other_person_${elementIndex}`)[0];
            if (selectElement.value === 'other') {
              otherPersonInput.style.display = 'block'; // Show input field when "other" is selected
              } else {
              otherPersonInput.style.display = 'none'; // Hide input field for other selections
              }
            }

          // Get the tense features from the Python context and convert them to JSON
          const tenseFeatures = {{ tensefeatures|tojson }};  // Convert Python list of tuples to JSON
          // Create a label for the tense selection
          const tenseFeaturesLabel = document.createElement('label');
          tenseFeaturesLabel.textContent = 'Tense of the element (optional):';
          // Create dropdown (select element) for tense
          const tenseFeaturesSelect = document.createElement('select');
          tenseFeaturesSelect.name = `tense_${i + 1}`;
          // Populate the dropdown with options from the 'tenseFeatures' array
          tenseFeatures.forEach(([uri, label]) => {
              const option = document.createElement('option');
              option.value = uri;         // The URI of the tense feature is used as the value
              option.textContent = label; // The label is displayed in the dropdown
              tenseFeaturesSelect.appendChild(option);
          });
          // Add "Other" option to the dropdown
          const tenseFeaturesOtherOption = document.createElement('option');
          tenseFeaturesOtherOption.value = 'Other';
          tenseFeaturesOtherOption.textContent = 'Other';
          tenseFeaturesSelect.appendChild(tenseFeaturesOtherOption);
          // Append the label and dropdown to the container
          container.appendChild(tenseFeaturesLabel);
          container.appendChild(tenseFeaturesSelect);
          container.appendChild(document.createElement('br'));
          // Create an input field for "Other" option (initially hidden)
          const tenseFeaturesOtherInput = document.createElement('input');
          tenseFeaturesOtherInput.type = 'text';
          tenseFeaturesOtherInput.name = `add_tense_${i + 1}`;
          tenseFeaturesOtherInput.placeholder = 'Please specify';  // Placeholder text inside the input field
          tenseFeaturesOtherInput.style.display = 'none';  // Hidden by default
          // Append the "Other" input field to the container
          container.appendChild(tenseFeaturesOtherInput);
          // Event listener for showing/hiding the "Other" input field based on selection
          tenseFeaturesSelect.addEventListener('change', function() {
            if (tenseFeaturesSelect.value === 'Other') {
              tenseFeaturesOtherInput.style.display = 'inline';  // Show the input field
            } else {
              tenseFeaturesOtherInput.style.display = 'none';  // Hide the input field
            }
          });

          // Create label for mode
          const modus = {{ modus|tojson }};  // Convert Python list to JSON
          // Create fields for mode
          const modusLabel = document.createElement('label');
          modusLabel.textContent = `(Verb) mode of the element (optional):`;
          // Create dropdown (select element) for mode
          const modusSelect = document.createElement('select');
          modusSelect.name = `modus_${i + 1}`;
          // Populate the dropdown with options from the 'modus' array
          modus.forEach(role => {
            const option = document.createElement('option');
            option.value = role;
            option.textContent = role;
            modusSelect.appendChild(option);
            });
          // Add "Other" option to the dropdown
          const modusOtherOption = document.createElement('option');
          modusOtherOption.value = 'Other';
          modusOtherOption.textContent = 'Other';
          modusSelect.appendChild(modusOtherOption);
          // Append the label and dropdown to the container
          container.appendChild(modusLabel);
          container.appendChild(modusSelect);
          container.appendChild(document.createElement('br'));
          // Create an input field for "Other" option (initially hidden)
          const modusOtherInput = document.createElement('input');
          modusOtherInput.type = 'text';
          modusOtherInput.name = `add_modus_${i + 1}`;
          modusOtherInput.placeholder = 'Please specify';  // Placeholder text inside the input field
          modusOtherInput.style.display = 'none';  // Hidden by default
          // Append the "Other" input field to the container
          container.appendChild(modusOtherInput);
          // Event listener for showing/hiding the "Other" input field based on selection
          modusSelect.addEventListener('change', function() {
            if (modusSelect.value === 'Other') {
              modusOtherInput.style.display = 'inline';  // Show the input field
            } else {
              modusOtherInput.style.display = 'none';  // Hide the input field
            }
          });

          // Create fields for voice (dropdown + optional free-text input)
          const voiceLabel = document.createElement('label');
          voiceLabel.textContent = `Voice (optional):`;
          container.appendChild(voiceLabel);
          const voiceSelect = document.createElement('select');
          voiceSelect.name = `voice_${i + 1}`;
          voiceSelect.onchange = function() { toggleVoiceInput(voiceSelect, i + 1); };  // Change handler for "other" selection
          // First option: empty
          const voiceEmptyOption = document.createElement('option');
          voiceEmptyOption.value = '';
          voiceEmptyOption.textContent = '';
          // Second option: Active
          const activeOption = document.createElement('option');
          activeOption.value = 'active';
          activeOption.textContent = 'Active';
          // Third option: Passive
          const passiveOption = document.createElement('option');
          passiveOption.value = 'passive';
          passiveOption.textContent = 'Passive';
          // Option other
          const voiceOtherOption = document.createElement('option');
          voiceOtherOption.value = 'other';
          voiceOtherOption.textContent = 'Other';
          // Select option
          voiceSelect.appendChild(voiceEmptyOption);
          voiceSelect.appendChild(activeOption);
          voiceSelect.appendChild(passiveOption);
          voiceSelect.appendChild(voiceOtherOption);
          container.appendChild(voiceSelect);
          // Hidden input for "other" voice (free-text input field)
          const otherVoiceInput = document.createElement('input');
          otherVoiceInput.type = 'text';
          otherVoiceInput.name = `other_voice_${i + 1}`;
          otherVoiceInput.placeholder = 'Please specify';
          otherVoiceInput.style.display = 'none'; // Hidden by default
          container.appendChild(otherVoiceInput);
          container.appendChild(document.createElement('br'));
          // Function to toggle free-text input visibility for "other" voice selection
          function toggleVoiceInput(selectElement, elementIndex) {
            const otherVoiceInput = document.getElementsByName(`other_voice_${elementIndex}`)[0];
            if (selectElement.value === 'other') {
              otherVoiceInput.style.display = 'block'; // Show input field when "other" is selected
              } else {
              otherVoiceInput.style.display = 'none'; // Hide input field for other selections
              }
            }

          // Create fields for semantic property
          const sempropLabel = document.createElement('label');
          sempropLabel.textContent = `Semantic property (optional):`;
          // Create an info icon
          const sempropInfoIcon = document.createElement('span');
          sempropInfoIcon.className = 'info-icon';
          sempropInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const sempropTooltipText = document.createElement('span');
          sempropTooltipText.className = 'tooltiptext';
          sempropTooltipText.innerHTML = `
            Any remarks related to the type of the element which could not be captured by the previous ﬁelds. <br>
            For example: <br>
            The NP often has a very generic meaning, e.g. cose (things, issues). <br>
            AdjP concerns some speciﬁc lexemes that are related to a psychological state.`;
          // Create a container for the label and the info icon
          const sempropLabelContainer = document.createElement('div');
          sempropLabelContainer.className = 'label-container';
          sempropLabelContainer.appendChild(sempropLabel);
          sempropLabelContainer.appendChild(sempropInfoIcon);
          const sempropInput = document.createElement('input');
          sempropInput.type = 'text';
          sempropInput.name = `semprop_${i + 1}`;
          // Create a container for the input and the tooltip
          const sempropTooltipContainer = document.createElement('div');
          sempropTooltipContainer.className = 'tooltip-container';
          sempropTooltipContainer.appendChild(sempropInput);
          sempropTooltipContainer.appendChild(sempropTooltipText);
          // Add tooltip functionality to the info icon
          sempropInfoIcon.appendChild(sempropTooltipText);
          container.appendChild(sempropLabelContainer);
          container.appendChild(sempropTooltipContainer);
          container.appendChild(document.createElement('br'));

          // Create fields for other element specification
          const otherElementSpecificationLabel = document.createElement('label');
          otherElementSpecificationLabel.textContent = `Other element specification (optional):`;
          // Create an info icon
          const otherElementSpecificationInfoIcon = document.createElement('span');
          otherElementSpecificationInfoIcon.className = 'info-icon';
          otherElementSpecificationInfoIcon.textContent = 'ℹ️'; // Unicode info symbol
          // Create the tooltip text container with HTML content
          const otherElementSpecificationTooltipText = document.createElement('span');
          otherElementSpecificationTooltipText.className = 'tooltiptext';
          otherElementSpecificationTooltipText.innerHTML = `Any other speciﬁcation that does not ﬁt into the other ﬁelds.`;
          // Create a container for the label and the info icon
          const otherElementSpecificationLabelContainer = document.createElement('div');
          otherElementSpecificationLabelContainer.className = 'label-container';
          otherElementSpecificationLabelContainer.appendChild(otherElementSpecificationLabel);
          otherElementSpecificationLabelContainer.appendChild(otherElementSpecificationInfoIcon);
          const otherElementSpecificationInput = document.createElement('input');
          otherElementSpecificationInput.type = 'text';
          otherElementSpecificationInput.name = `element_specification_${i + 1}`;
          // Create a container for the input and the tooltip
          const otherElementSpecificationTooltipContainer = document.createElement('div');
          otherElementSpecificationTooltipContainer.className = 'tooltip-container';
          otherElementSpecificationTooltipContainer.appendChild(otherElementSpecificationInput);
          otherElementSpecificationTooltipContainer.appendChild(otherElementSpecificationTooltipText);
          // Add tooltip functionality to the info icon
          otherElementSpecificationInfoIcon.appendChild(otherElementSpecificationTooltipText);
          container.appendChild(otherElementSpecificationLabelContainer);
          container.appendChild(otherElementSpecificationTooltipContainer);
          container.appendChild(document.createElement('br'));


        }

      // Dynamically add checkboxes for Topic, Comment, Focus, Background in a grid
        ['Topic', 'Comment', 'Focus', 'Background'].forEach(function(field) {
            const fieldContainer = document.createElement('div');
            const fieldLabel = document.createElement('h4');
            fieldLabel.textContent = `${field}:`;
            fieldContainer.appendChild(fieldLabel);

            for (let i = 0; i < elementNb; i++) {
                const checkboxContainer = document.createElement('div');
                checkboxContainer.className = 'checkbox-container';

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';

                // Create the correct URI as the value
                checkbox.value = `${constructionName}_${String.fromCharCode(65 + i)}`; // e.g., construction_A, construction_B, etc.

                checkbox.name = `${field.toLowerCase()}_element[]`; // Store as an array

                const checkboxLabel = document.createElement('label');
                checkboxLabel.textContent = `Element ${i + 1}`;

                // Append checkbox and label side by side in the container
                checkboxContainer.appendChild(checkbox);
                checkboxContainer.appendChild(checkboxLabel);

                // Append each checkbox-container to the field container
                fieldContainer.appendChild(checkboxContainer);
            }

            infoContainer.appendChild(fieldContainer);
        });
    }

    // List of existing constructions for autocomplete
    var existingConstructions = {{ existingconstructions | safe }};
    $(function() {
      $("#inheritsFrom").autocomplete({
        source: existingConstructions
      });
    });

    // List of constructions for "Inherits from"
    let selectedInheritsFrom = [];
    // Add selected construction
    $('#add_inherits_from').click(function() {
      let construction = $('#inheritsFrom').val().trim();
      if (construction && !selectedInheritsFrom.includes(construction)) {
        selectedInheritsFrom.push(construction);
        updateSelectedInheritsFrom();
      }
      $('#inheritsFrom').val('');  // Clear input field
    });
    // Update the display and hidden input field with selected constructions
    function updateSelectedInheritsFrom() {
      let selectedInheritsFromDiv = $('#selected_inherits_from');
      selectedInheritsFromDiv.empty();  // Clear previous buttons
      selectedInheritsFrom.forEach(function(construction, index) {
        let button = $('<button>').text(construction).attr('type', 'button');
        button.click(function() {
          selectedInheritsFrom.splice(index, 1);  // Remove from list
          updateSelectedInheritsFrom();
        });
        selectedInheritsFromDiv.append(button);
      });
      // Ensure the hidden input field is updated with an empty list if no constructions are selected
      $('#selected_inherits_from_list').val(selectedInheritsFrom.length ? JSON.stringify(selectedInheritsFrom) : '[]');
    }

    // List of existing constructions for autocomplete
    var existingConstructions = {{ existingconstructions | safe }};
    $(function() {
      $("#inheritedBy").autocomplete({
        source: existingConstructions
      });
    });

    // List of constructions for "Inherited by"
    let selectedInheritedBy = [];
    // Add selected construction
    $('#add_inherited_by').click(function() {
      let construction = $('#inheritedBy').val().trim();
      if (construction && !selectedInheritedBy.includes(construction)) {
        selectedInheritedBy.push(construction);
        updateSelectedInheritedBy();
      }
      $('#inheritedBy').val('');  // Clear input field
    });
    // Update the display and hidden input field with selected constructions
    function updateSelectedInheritedBy() {
      let selectedInheritedByDiv = $('#selected_inherited_by');
      selectedInheritedByDiv.empty();  // Clear previous buttons
      selectedInheritedBy.forEach(function(construction, index) {
        let button = $('<button>').text(construction).attr('type', 'button');
        button.click(function() {
          selectedInheritedBy.splice(index, 1);  // Remove by list
          updateSelectedInheritedBy();
        });
        selectedInheritedByDiv.append(button);
      });
      // Ensure the hidden input field is updated with an empty list if no constructions are selected
      $('#selected_inherited_by_list').val(selectedInheritedBy.length ? JSON.stringify(selectedInheritedBy) : '[]');
    }

    // List of existing constructions for autocomplete
    var existingConstructions = {{ existingconstructions | safe }};
    $(function() {
      $("#metaphoricalExtension").autocomplete({
        source: existingConstructions
      });
    });

    // List of constructions for "Metaphorical extension"
    let selectedMetaphoricalExtension = [];
    // Add selected construction
    $('#add_metaphorical_extension').click(function() {
      let construction = $('#metaphoricalExtension').val().trim();
      if (construction && !selectedMetaphoricalExtension.includes(construction)) {
        selectedMetaphoricalExtension.push(construction);
        updateSelectedMetaphoricalExtension();
      }
      $('#metaphoricalExtension').val('');  // Clear input field
    });
    // Update the display and hidden input field with selected constructions
    function updateSelectedMetaphoricalExtension() {
      let selectedMetaphoricalExtensionDiv = $('#selected_metaphorical_extension');
      selectedMetaphoricalExtensionDiv.empty();  // Clear previous buttons
      selectedMetaphoricalExtension.forEach(function(construction, index) {
        let button = $('<button>').text(construction).attr('type', 'button');
        button.click(function() {
          selectedMetaphoricalExtension.splice(index, 1);  // Remove extension list
          updateSelectedMetaphoricalExtension();
        });
        selectedMetaphoricalExtensionDiv.append(button);
      });
      // Ensure the hidden input field is updated with an empty list if no constructions are selected
      $('#selected_metaphorical_extension_list').val(selectedMetaphoricalExtension.length ? JSON.stringify(selectedMetaphoricalExtension) : '[]');
    }


    // A button to create fields for similarity links
    let similarityLinkCounter = 0;
    function addSimilarityLink() {
      similarityLinkCounter++;
      const container = document.getElementById('SimilarityContainer');
      const similarityLinkDiv = document.createElement('div');
      similarityLinkDiv.className = 'similarityLink';
      similarityLinkDiv.innerHTML = `
        <div class="link-fields">
          <div class="field-group field-half">
            <label for="similarityLink_Cx_${similarityLinkCounter}">Similar construction:</label>
            <input type="text" name="similarityLink_Cx_${similarityLinkCounter}" id="similarityLink_Cx_${similarityLinkCounter}" class="similarityLink_Cx" />
          </div>

          <div class="field-group field-third">
            <label for="crosslinguistic_${similarityLinkCounter}">Crosslinguistic:</label>
            <select name="crosslinguistic_${similarityLinkCounter}" id="crosslinguistic_${similarityLinkCounter}">
              <option value="Empty"></option>
              <option value="no">No</option>
              <option value="yes">Yes</option>
            </select>
          </div>

          <div class="field-group field-third">
            <label for="meaningSim_${similarityLinkCounter}">Meaning sim.:</label>
            <select name="meaningSim_${similarityLinkCounter}" id="meaningSim_${similarityLinkCounter}">
              <option value="Empty"></option>
              <option value="Same">Same</option>
              <option value="Similar">Similar</option>
              <option value="Different">Different</option>
            </select>
          </div>

          <div class="field-group field-third">
            <label for="formSim_${similarityLinkCounter}">Form sim.:</label>
            <select name="formSim_${similarityLinkCounter}" id="formSim_${similarityLinkCounter}">
              <option value="Empty"></option>
              <option value="same">Same</option>
              <option value="similar">Similar</option>
              <option value="different">Different</option>
            </select>
          </div>
        </div>
      `;
      container.appendChild(similarityLinkDiv);
      // Apply autocomplete to the newly added input field
      $(`#similarityLink_Cx_${similarityLinkCounter}`).autocomplete({
        source: existingConstructions
      });
    }


        $(document).ready(function() {
    // Add new literature entry
    $('#add-literature-btn').click(function() {
      const newEntry = `
        <div class="literature-entry">
          <label for="literature">Add RDF code for literature reference:</label>
          <textarea name="literature[]" rows="5" cols="50" placeholder="Paste RDF code"></textarea>
        </div>`;
      $('#literature-container').append(newEntry);
    });

    // Add new URL entry
    $('#add-url-btn').click(function() {
      const newUrlEntry = `
        <div class="url-entry">
          <label for="url">Please provide an URL:</label>
          <input type="url" name="url[]" placeholder="Enter URL">
        </div>`;
      $('#url-container').append(newUrlEntry);
    });
  });




    // A button to create fields for examples
      let exampleCounter = 0;

    function addExample() {
        exampleCounter++;
        const container = document.getElementById('ExamplesContainer');

        const exampleDiv = document.createElement('div');
        exampleDiv.className = 'example';
        exampleDiv.innerHTML = `
            <h3>Example ${exampleCounter}</h3>
            <label for="example_text_${exampleCounter}">Text of the example:</label>
            <input type="text" id="example_text_${exampleCounter}" name="example_text_${exampleCounter}">
            <br>
            <label for="example_translation_${exampleCounter}">Translation of the example:</label>
            <input type="text" id="example_translation_${exampleCounter}" name="example_translation_${exampleCounter}">
            <br>
            <label for="example_transliteration_${exampleCounter}">Transliteration of the example:</label>
            <input type="text" id="example_transliteration_${exampleCounter}" name="example_transliteration_${exampleCounter}">
            <br>
            <label for="glosses_${exampleCounter}">Glosses of the example:</label>
            <input type="text" id="glosses_${exampleCounter}" name="glosses_${exampleCounter}">
            <br>
            <label for="comment_${exampleCounter}">Comment:</label>
            <input type="text" id="comment_${exampleCounter}" name="comment_${exampleCounter}">
            <br><br>
        `;
        container.appendChild(exampleDiv);
    }

    </script>

{% endblock %}
